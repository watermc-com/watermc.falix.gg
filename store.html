<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaterMC Store | Ranks & Perks</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
        :root {
            --aqua: #00FFFF;
            --aqua-dim: #008b8b;
            --gold: #FFD700;
            --dark-gold: #B8860B;
            --stone-dark: #1a1a1a;
            --stone-light: #2b2b2b;
            --red-accent: #8B0000;
            --text-color: #e0e0e0;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Cinzel', serif;
            background-color: #0f0f0f;
            background-image: radial-gradient(circle at center, #2c2c2c 0%, #0f0f0f 100%);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Background Pattern */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40'/%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
            z-index: -1;
        }

        /* Header */
        header {
            text-align: center;
            padding: 30px 20px;
            width: 100%;
            border-bottom: 2px solid var(--aqua-dim);
        }

        h1 {
            font-family: 'Press Start 2P', cursive;
            color: var(--aqua);
            text-shadow: 4px 4px 0px #005f5f;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 40px;
            max-width: 1400px;
            width: 100%;
            padding: 40px 20px;
        }

        /* Left Side: Product List */
        .products-section {
            flex: 2;
            min-width: 600px;
        }

        .section-title {
            color: var(--gold);
            margin-bottom: 20px;
            border-left: 5px solid var(--aqua);
            padding-left: 15px;
            font-size: 1.5rem;
        }

        /* Rank Cards Grid */
        .rank-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Individual Rank Item */
        .rank-item {
            background: var(--stone-dark);
            border: 2px solid #444;
            padding: 20px;
            border-radius: 6px;
            text-align: center;
            transition: 0.3s;
            position: relative;
        }

        .rank-item:hover {
            border-color: var(--aqua);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.1);
        }

        .rank-name {
            color: var(--aqua);
            font-size: 1.4rem;
            margin-bottom: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .rank-price {
            color: var(--gold);
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
        }

        .btn-add {
            background: transparent;
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 10px 20px;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            text-transform: uppercase;
            width: 100%;
        }

        .btn-add:hover {
            background: var(--gold);
            color: black;
            box-shadow: 0 0 10px var(--gold);
        }

        /* Right Side: Basket Only */
        .sidebar {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Basket Card */
        .basket-card {
            background: var(--stone-light);
            border: 4px solid var(--gold);
            padding: 20px;
            border-radius: 8px;
            position: sticky;
            top: 20px;
        }

        .basket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #555;
            padding-bottom: 10px;
        }

        .basket-title {
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .basket-count {
            background: var(--aqua);
            color: black;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            font-family: 'Press Start 2P';
        }

        .basket-items {
            list-style: none;
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .basket-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #444;
            font-size: 0.9rem;
        }

        .basket-item span { color: #ccc; }
        
        .remove-btn {
            color: #ff4444;
            cursor: pointer;
            margin-left: 10px;
            font-weight: bold;
        }

        .basket-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            color: var(--gold);
            font-weight: bold;
            margin-bottom: 20px;
        }

        .checkout-btn {
            background: var(--red-accent);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
            border: 2px solid transparent;
        }

        .checkout-btn:hover {
            background: #ff4444;
            border-color: white;
        }

        .empty-msg {
            color: #666;
            font-style: italic;
            text-align: center;
            margin-top: 20px;
        }

        /* --- POP UP MODAL (Checkout) --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--stone-light);
            border: 4px double var(--gold);
            padding: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            border-radius: 4px;
            position: relative;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.2);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2rem;
            color: #666;
            cursor: pointer;
            transition: color 0.2s;
        }

        .close-btn:hover {
            color: var(--red-accent);
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--gold);
            margin-bottom: 20px;
        }

        .discord-btn {
            background: #5865F2; /* Discord Color */
            border: 2px solid #fff;
            color: white;
            padding: 15px;
            width: 100%;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            cursor: pointer;
            font-size: 1.1rem;
            transition: 0.2s;
            margin-top: 20px;
            text-transform: uppercase;
        }

        .discord-btn:hover {
            background: #4752C4;
            box-shadow: 0 0 15px #5865F2;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .products-section { min-width: 100%; }
            .sidebar { min-width: 100%; }
        }
    </style>
</head>
<body>

    <header>
        <h1>WaterMC</h1>
        <div class="subtitle">Official Server Store</div>
    </header>

    <div class="main-layout">
        
        <!-- LEFT: LIST OF 7 RANKS -->
        <div class="products-section">
            <h2 class="section-title">Select Your Rank</h2>
            <div class="rank-grid" id="rankGrid">
                <!-- Ranks will be inserted here by JS -->
            </div>
        </div>

        <!-- RIGHT: BASKET ONLY -->
        <div class="sidebar">
            
            <!-- BASKET CARD -->
            <div class="basket-card">
                <div class="basket-header">
                    <div class="basket-title">Your Basket</div>
                    <div class="basket-count" id="basketCount">0</div>
                </div>
                
                <ul class="basket-items" id="basketItems">
                    <li class="empty-msg">Your basket is empty</li>
                </ul>

                <div class="basket-total">
                    <span>Total:</span>
                    <span id="totalPrice">$0.00</span>
                </div>

                <button class="checkout-btn" onclick="openCheckout()">Checkout</button>
            </div>

        </div>
    </div>

    <!-- CHECKOUT POPUP MODAL -->
    <div class="modal-overlay" id="checkoutModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCheckout()">&times;</span>
            <h2 class="modal-title">Finalize Purchase</h2>
            <p style="color: #ccc; margin-bottom: 15px;">To complete your order, please create a ticket on our Discord server.</p>
            <p style="color: var(--aqua); font-weight: bold; margin-bottom: 20px;">Click the button below to open the ticket channel.</p>
            
            <button class="discord-btn" onclick="redirectToDiscord()">Create Kit Ticket</button>
        </div>
    </div>

    <script>
        // --- DATA: 7 RANKS ---
        const ranks = [
            { id: 1, name: "Waveborn", price: 2.00, desc: "Basic chat color & prefix." },
            { id: 2, name: "Tideborn", price: 4.00, desc: "Access to /kit knight & /fly in lobby." },
            { id: 3, name: "StromForged", price: 7.00, desc: "Extra /sethome and daily rewards." },
            { id: 4, name: "DeapthReaper", price: 10.00, desc: "Access to /workbench & /enderchest." },
            { id: 5, name: "Abyssguard", price: 15.99, desc: "Unlimited Claims." },
            { id: 6, name: "Abysslord", price: 23.99, desc: "Custom join message & pets." },
            { id: 7, name: "Water Kit", price: 29.99, desc: "Full server support & vote keys." }
        ];

        // --- STATE ---
        let basket = [];

        // --- INITIALIZE STORE ---
        const rankGrid = document.getElementById('rankGrid');

        ranks.forEach(rank => {
            const card = document.createElement('div');
            card.className = 'rank-item';
            card.innerHTML = `
                <div class="rank-name">${rank.name}</div>
                <div class="rank-price">$${rank.price.toFixed(2)}</div>
                <p style="font-size:0.8rem; color:#888; margin-bottom:15px;">${rank.desc}</p>
                <button class="btn-add" onclick="addToBasket(${rank.id})">Add to Basket</button>
            `;
            rankGrid.appendChild(card);
        });

        // --- FUNCTIONS ---

        function addToBasket(id) {
            const rank = ranks.find(r => r.id === id);
            basket.push(rank);
            updateBasketUI();
            alert(`${rank.name} added to basket!`);
        }

        function removeFromBasket(index) {
            basket.splice(index, 1);
            updateBasketUI();
        }

        function updateBasketUI() {
            const basketList = document.getElementById('basketItems');
            const countSpan = document.getElementById('basketCount');
            const totalSpan = document.getElementById('totalPrice');

            countSpan.innerText = basket.length;
            const total = basket.reduce((sum, item) => sum + item.price, 0);
            totalSpan.innerText = `$${total.toFixed(2)}`;

            basketList.innerHTML = '';
            
            if (basket.length === 0) {
                basketList.innerHTML = '<li class="empty-msg">Your basket is empty</li>';
                return;
            }

            basket.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'basket-item';
                li.innerHTML = `
                    <div>
                        <span style="color: var(--aqua); font-weight:bold;">${item.name}</span>
                        <span style="font-size:0.8em; color:#777;"> - $${item.price}</span>
                    </div>
                    <div class="remove-btn" onclick="removeFromBasket(${index})">&times;</div>
                `;
                basketList.appendChild(li);
            });
        }

        // --- CHECKOUT LOGIC ---

        function openCheckout() {
            if (basket.length === 0) {
                alert("Your basket is empty!");
                return;
            }
            
            // Ask for username before showing discord link
            const username = prompt("Please enter your Minecraft Username to finalize purchase:");
            
            if (username) {
                // Show the Discord popup
                document.getElementById('checkoutModal').classList.add('active');
            }
        }

        function closeCheckout() {
            document.getElementById('checkoutModal').classList.remove('active');
        }

        function redirectToDiscord() {
            // Redirect to specific Discord channel
            window.location.href = "https://discord.com/channels/1400220776203944088/1465062780183908538/1473984062715859109";
        }
    </script>

</body>
</html>
